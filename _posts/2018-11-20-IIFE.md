---
layout: post
title: "IIFE (ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼)"
subtitle: "About IIFE"
author: "Rushan"
header-img: "img/post-bg-default.jpg"
header-img-credit: "Photo by Andy Holmes on Unsplash"
header-img-credit-href: "https://unsplash.com/photos/LUpDjlJv4_c"
header-mask: 0.4
tags:
  - JavaScript
  - IIFE
---

## å®šä¹‰

> IIFE (Immediately Invoked Function Expression)is a JavaScript function that runs as soon as it is defined. â€”â€”â€”â€” MDN

IIFE (ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼)ï¼Œæ˜¯ä¸€ä¸ªå®šä¹‰å®Œç«‹å³æ‰§è¡Œçš„**å‡½æ•°è¡¨è¾¾å¼**ã€‚

## è¯•éªŒï¼ˆåæ­£ç©ä¸åğŸŒï¼‰

```js
var foo = function () {
    console.log('IIFE');
};
foo();

// IIFE å°±åƒä¸Šé¢åˆä¸ºä¸€ä½“ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥è®©å‡½æ•°è¡¨è¾¾å¼åé¢ç›´æ¥åŠ `()`ï¼Œè‡ªå·±è°ƒç”¨è‡ªå·±å—ï¼Ÿ

// è¯•éªŒ1.1
function () {
    console.log('IIFE');
}() // -> Uncaught SyntaxError: Unexpected token (

// è¯•éªŒ1.2
var foo = function () {
    console.log('IIFE');
}(); // -> 'IIFE' ; undefined

```

ğŸ¤” è¯•éªŒ1.1æç¤ºè¯­æ³•é”™è¯¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

å½“è§£æå™¨é‡åˆ°`function`å…³é”®å­—ï¼Œé»˜è®¤æ˜¯å½“ä½œ[å‡½æ•°å£°æ˜][1](function declaration)è€Œä¸æ˜¯[å‡½æ•°è¡¨è¾¾å¼][2](function expression)ã€‚å¦‚æœä¸æ˜ç¡®å‘Šè¯‰è§£æå™¨è¿™é‡Œæ˜¯ä¸ªè¡¨è¾¾å¼ï¼Œè§£æå™¨å°±æŠŠå®ƒå½“ä½œæ˜¯å‡½æ•°å£°æ˜ã€‚è€Œå‡½æ•°å£°æ˜æ˜¯éœ€è¦ä¸€ä¸ªæ ‡è¯†ç¬¦(å‡½æ•°å)çš„ï¼Œå®ƒæ²¡æœ‰ï¼Œæ‰€ä»¥æŠ›å‡ºè¯­æ³•é”™è¯¯ã€‚errorä¸­çš„ `(` æŒ‡çš„æ˜¯ `function` åçš„å·¦æ‹¬å·ã€‚

```js
// æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°å£°æ˜
// ä¸è¯•éªŒ1.1ç»“æœç›¸åŒ
function () {
    console.log('IIFE');
} // -> Uncaught SyntaxError: Unexpected token (
```

è¯•éªŒ1.2æ­£å¸¸ğŸ˜‰ï¼Œç«‹å³æ‰§è¡Œäº†å‡½æ•°ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªèµ‹å€¼è¯­å¥ï¼Œè§£æå™¨çŸ¥é“ `=` å³è¾¹æ˜¯è¡¨è¾¾å¼ã€‚

```js
// è¯•éªŒ2.1
// é‚£å¦‚æœç»™äº†å‡½æ•°åï¼Œåœ¨ä¸€ä¸ªå‡½æ•°åé¢æ”¾`()`å‘¢ï¼Ÿ
function foo () {
    console.log('IIFE');
}() // -> Uncaught SyntaxError: Unexpected token )

// è¯•éªŒ2.2
function foo () {
    console.log('IIFE');
}(1) // -> 1
```

è¯•éªŒ2.1æŠ¥é”™ï¼Œä¸ºå•¥ï¼Ÿæ ¹æ®è¯•éªŒ1.1çš„è§£é‡Šï¼Œè¿™é‡Œç¬¬äºŒä¸ª `()` å‰æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ã€‚è™½ç„¶ `()` æ”¾åœ¨å‡½æ•°è¡¨è¾¾å¼åé¢ï¼Œè¡¨ç¤ºè°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯ `()` æ”¾åœ¨å‡½æ•°å£°æ˜åé¢å°±ğŸ¤·â€â€¦â€¦

å‡½æ•°å£°æ˜åé¢æ¥çš„å†…å®¹ä¼šä¸å‡½æ•°å£°æ˜åˆ†å¼€ï¼Œæœ€åçš„åœ†æ‹¬å·å°±è¢«å½“ä½œä¸€ä¸ªè¿ç®—ç¬¦ï¼Œ[Grouping operator][3]ï¼Œç”¨æ¥æ§åˆ¶è¡¨è¾¾å¼ä¸­çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œè€Œä¸æ˜¯è¡¨ç¤ºè°ƒç”¨å‡½æ•°ã€‚æŠ¥é”™æ˜¯å› ä¸º**åœ†æ‹¬å·è¿ç®—ç¬¦ä¸­å¿…é¡»æœ‰è¡¨è¾¾å¼**ğŸ½ã€‚

```js
// è¯•éªŒ2.1ç›¸å½“äº
function foo () {
    console.log('IIFE');
}
(); // -> Uncaught SyntaxError: Unexpected token )

// è¯•éªŒ2.2ç›¸å½“äº
function foo () {
    console.log('IIFE');
} // å‡½æ•°å£°æ˜äº†ï¼Œæ²¡æœ‰æ‰§è¡Œ
(1); // -> 1
```

å‰é¢è¯•éªŒ1.1æåˆ°éœ€è¦æ˜ç¡®å‘Šè¯‰è§£æå™¨ï¼Œè¿™ä¸ªå¸¦`function`å…³é”®å­—çš„æ˜¯ä¸ªè¡¨è¾¾å¼ã€‚ğŸ™‹é‚£è¦æ€ä¹ˆå‘Šè¯‰å®ƒï¼Ÿ

æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ï¼ŒğŸ’†åŒ…è£¹åœ¨`()`é‡Œã€‚

å¦‚è¯•éªŒ2.1æåˆ°çš„ï¼Œ`()` é‡Œæ˜¯è¡¨è¾¾å¼ã€‚é‚£ä¹ˆå½“è§£æå™¨åœ¨ `()` é‡Œé‡åˆ°`function` æ—¶ï¼Œä¼šå½“ä½œå‡½æ•°è¡¨è¾¾å¼å»è§£æï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚

```js
// ç¬¬ä¸€ç§ï¼šğŸ’„å…¨éƒ½åŒ…èµ·æ¥
(function () {
    console.log('IIFE');
}()); // æœ€å¤–é¢çš„æ‹¬å·é‡Œçš„è¡¨è¾¾å¼å°±æ˜¯IIFE

// ç¬¬äºŒç§ï¼šæŠŠå‡½æ•°åŒ…èµ·æ¥ğŸ¥œ
(function () {
    console.log('IIFE');
})(); // ç¬¬ä¸€ä¸ªæ‹¬å·é‡Œçš„è¡¨è¾¾å¼æ˜¯å‡½æ•°è¡¨è¾¾å¼

// ç¬¬ä¸‰ç§ï¼Œä¸ç”¨åŠ æ‹¬å·ï¼Œæ”¾åœ¨èµ‹å€¼è¯­å¥é‡Œ
var foo = function () {
    console.log('IIFE');
}(); // `=`å³è¾¹çš„è¡¨è¾¾å¼å°±æ˜¯IIFE

```

å…¶ä»–çš„å®ç°æ–¹å¼å¯æˆ³ğŸ‘‡å‚è€ƒèµ„æ–™

## å‚è€ƒèµ„æ–™

[Immediately-Invoked Function Expression (IIFE) â€” Ben Alman](http://benalman.com/news/2010/11/immediately-invoked-function-expression/#iife)

[1]:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function

[2]:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function

[3]:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Grouping